import json
import re

story = {'type': 'story', 'version': '0.10.9', 'content_elements': [{'_id': 'HYJW4XHXCFDTXFLBZI4RSSVYF4', 'type': 'text', 'additional_properties': {'_id': 1676135995161, 'comments': [], 'inline_comments': []}, 'content': 'Cette nouvelle politique est le résultat de près d’un an de travail, selon ses responsables. Rappelons qu’un comité de pilotage, présidé par la conseillère Lynda Graham, a permis d’en tracer les lignes directrices.'}, {'_id': 'WBD5H7ATFJDLRCXA3BLVOLQPYQ', 'type': 'text', 'additional_properties': {'_id': 1676135995162, 'comments': [], 'inline_comments': []}, 'content': 'Cette dernière a salué le travail des membres du comité, ainsi que la participation des citoyens au sondage et aux groupes de discussion mis en place lors du processus. Pour sa part, le maire de Sutton souligne l’importance de cette politique, qui vise, selon lui, une majeure partie de la population.'}, {'_id': 'CGCN2UVXGFDKFDYZK53XLOXAKQ', 'additional_properties': {'fullSizeResizeUrl': '/resizer/mVGpWbkTBxxfcLLrhoWc7GKlzD8=/arc-photo-lescoopsdelinformation/arc2-prod/public/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'galleries': [], 'mime_type': 'image/jpeg', 'originalName': 'CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'originalUrl': 'https://cloudfront-us-east-1.images.arcpublishing.com/lescoopsdelinformation/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'proxyUrl': '/resizer/mVGpWbkTBxxfcLLrhoWc7GKlzD8=/arc-photo-lescoopsdelinformation/arc2-prod/public/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'published': True, 'resizeUrl': '/resizer/mVGpWbkTBxxfcLLrhoWc7GKlzD8=/arc-photo-lescoopsdelinformation/arc2-prod/public/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'restricted': False, 'thumbnailResizeUrl': '/resizer/4R1f1CDqaF_l1_kTZu7gS07N6sk=/300x0/arc-photo-lescoopsdelinformation/arc2-prod/public/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'version': 0, '_id': 'ZKZZDMUC3BEBRD32AFIM3ZTNMI', 'comments': []}, 'address': {}, 'caption': 'Maire de Sutton, Robert Benoît se dit fier du résultat et du travail accompli par le comité de pilotage présidé par sa collègue, la conseillère Lynda Graham.', 'copyright': 'JESSY BROWN', 'created_date': '2023-01-28T23:50:09Z', 'credits': {'affiliation': [{'name': 'ARCHIVES LA VOIX DE L’EST', 'type': 'author'}], 'by': [{'byline': 'Credit photo', 'name': 'ARCHIVES LA VOIX DE L’EST', 'type': 'author'}]}, 'height': 2334, 'last_updated_date': '2023-01-28T23:50:09Z', 'licensable': False, 'owner': {'id': 'lescoopsdelinformation'}, 'source': {'additional_properties': {'editor': 'photo center'}, 'system': 'OMERLO'}, 'type': 'image', 'url': 'https://cloudfront-us-east-1.images.arcpublishing.com/lescoopsdelinformation/CGCN2UVXGFDKFDYZK53XLOXAKQ.jpg', 'version': '0.10.3', 'width': 3499, 'subtitle': ''}, {'_id': '63MPPSSQAFD37BQ4TNQZWMOVMY', 'type': 'text', 'additional_properties': {'_id': 1676135995164, 'comments': [], 'inline_comments': []}, 'content': 'D’après Robert Benoît, près du quart de la collectivité est composée d’aînés de plus de 65 ans. Et un nombre grandissant de jeunes familles s’installent sur le territoire de Sutton. « Il est de notre devoir en tant qu’élus d’avoir une vision à long terme et inclusive de cette réalité pour que notre communauté continue d’être attrayante, accueillante et bienveillante envers tous ses membres. Améliorer la qualité de vie doit être l’objectif (...) », commente le premier magistrat, par voie de communiqué.'}, {'_id': '3PTUAMCQO5BI5LZ5WWZM7S4GXU', 'type': 'header', 'level': 2, 'additional_properties': {'_id': 1676135995165, 'comments': [], 'inline_comments': []}, 'content': 'Plan d’action'}, {'_id': 'BPBXGQRM35ACDKJUJOEE3YUYEM', 'type': 'text', 'additional_properties': {'_id': 1676135995166, 'comments': [], 'inline_comments': []}, 'content': 'Le nouveau plan d’action se déploie sur cinq ans, entre 2023 et 2027. Il est appuyé par la participation de 23 partenaires de la communauté, notamment la FADOQ Les Deux Monts et le CAB Sutton. Ces organisations sont impliquées directement dans la réalisation de certains engagements, selon les responsables.'}, {'_id': 'HYJW4XHXCFDTXFLBZI4RSSVYF4', 'type': 'text', 'additional_properties': {'_id': 1676135995167, 'comments': [], 'inline_comments': []}, 'content': 'Le plan d’action 2023-2027 vise neuf champs d’action, soit Habitat et milieu de vie, Transport et mobilité, Participation sociale, Loisirs, Respect et inclusion sociale, Communication et information, Santé et services sociaux, Sécurité et Espaces extérieurs et bâtiments.'}, {'_id': 'YASVTCS2VRBX3KUMGY6NKWRIZU', 'type': 'text', 'additional_properties': {'_id': 1676135995168, 'comments': [], 'inline_comments': []}, 'content': 'Au sein de ces domaines, le plan fixe 21 objectifs au moyen de 36 actions concrètes, décrit la conseillère Lynda Graham. « Beaucoup seront lancées dès 2023 », promet-elle. En outre, un comité de suivi se réunira deux fois par année et fera l’évaluation de la démarche et des réalisations.'}, {'_id': 'F4KDYRJVRNC77NF4I2HTSLFAFM', 'type': 'text', 'additional_properties': {'_id': 1676135995169, 'comments': [], 'inline_comments': []}, 'content': 'La mise à jour de la politique et de son plan d’action a été rendue possible grâce à une aide financière de 12 000 $ du gouvernement du Québec, octroyé dans le cadre du programme de soutien à la démarche Municipalité amie des aînés (MADA)'}], 'created_date': '2023-02-11T16:11:00.767Z', 'revision': {'revision_id': 'KLO4SQMRBBDKDJDDF6GC2TW2KI', 'parent_id': 'CEGHN7T3CVFLBDK5UORJYQJ6UM', 'editions': ['default'], 'branch': 'default', 'user_id': 'nicolas.parent@lavoixdelest.ca', 'published': True}, 'last_updated_date': '2023-04-18T16:35:42.842Z', 'headlines': {'basic': 'Sutton dévoile sa nouvelle politique des familles et des aînés', 'meta_title': '', 'mobile': '', 'native': '', 'print': '', 'tablet': '', 'web': ''}, 'owner': {'sponsored': False, 'id': 'lescoopsdelinformation'}, 'content_restrictions': {'content_code': 'Payant'}, 'address': {}, 'workflow': {'status_code': 1}, 'subheadlines': {'basic': 'La Ville de Sutton a lancé récemment sa nouvelle politique des familles et des aînés. Assortie d’un plan d’action pour les cinq prochaines années (2023-2027), cette mesure vise l’élaboration d’une vision à long terme pour l’amélioration de la qualité de vie des citoyens concernés. '}, 'description': {'basic': ''}, 'language': '', 'label': {}, 'source': {'name': 'lescoopsdelinformation', 'source_type': 'staff', 'system': 'composer'}, 'taxonomy': {'primary_section': {'_id': '/actualites', '_website': 'la-voix-de-lest', 'type': 'section', 'version': '0.6.0', 'name': 'Actualités', 'description': None, 'path': '/actualites', 'parent_id': '/', 'parent': {'default': '/'}, 'additional_properties': {'original': {'_id': '/actualites', 'site_topper': {'site_logo_image': None}, 'social': {'facebook': None, 'twitter': None, 'rss': None, 'instagram': None}, 'site': {'site_url': None, 'site_tagline': None, 'pagebuilder_path_for_native_apps': None, 'site_title': None, 'site_description': None, 'site_keywords': None, 'site_about': None}, 'navigation': {'nav_title': 'Actualités'}, '_admin': {'alias_ids': ['/actualites']}, 'styles': {'color': 'Rouge primaire'}, 'metadata': {'metadata_title': 'Actualités', 'metadata_description': 'Actualités'}, '_website': 'la-voix-de-lest', 'name': 'Actualités', 'order': {'links-bar': 1001, 'sections-menu': 1001, 'pour-toi-settings': 1001}, 'parent': {'default': '/', 'app-hamburguer-menu': None, 'app-hamburger-menu': '/', 'links-bar': '/', 'sections-menu': '/', 'pour-toi-settings': '/'}, 'ancestors': {'default': [], 'app-hamburguer-menu': [], 'app-hamburger-menu': [], 'links-bar': ['/'], 'sections-menu': ['/'], 'pour-toi-settings': ['/']}, 'inactive': False, 'node_type': 'section'}}, '_website_section_id': 'la-voix-de-lest./actualites'}, 'sections': [{'_id': '/actualites', '_website': 'la-voix-de-lest', 'type': 'section', 'version': '0.6.0', 'name': 'Actualités', 'description': None, 'path': '/actualites', 'parent_id': '/', 'parent': {'default': '/'}, 'additional_properties': {'original': {'_id': '/actualites', 'site_topper': {'site_logo_image': None}, 'social': {'facebook': None, 'twitter': None, 'rss': None, 'instagram': None}, 'site': {'site_url': None, 'site_tagline': None, 'pagebuilder_path_for_native_apps': None, 'site_title': None, 'site_description': None, 'site_keywords': None, 'site_about': None}, 'navigation': {'nav_title': 'Actualités'}, '_admin': {'alias_ids': ['/actualites']}, 'styles': {'color': 'Rouge primaire'}, 'metadata': {'metadata_title': 'Actualités', 'metadata_description': 'Actualités'}, '_website': 'la-voix-de-lest', 'name': 'Actualités', 'order': {'links-bar': 1001, 'sections-menu': 1001, 'pour-toi-settings': 1001}, 'parent': {'default': '/', 'app-hamburguer-menu': None, 'app-hamburger-menu': '/', 'links-bar': '/', 'sections-menu': '/', 'pour-toi-settings': '/'}, 'ancestors': {'default': [], 'app-hamburguer-menu': [], 'app-hamburger-menu': [], 'links-bar': ['/'], 'sections-menu': ['/'], 'pour-toi-settings': ['/']}, 'inactive': False, 'node_type': 'section'}}, '_website_section_id': 'la-voix-de-lest./actualites'}, {'_id': '/actualites/politique', '_website': 'la-voix-de-lest', 'type': 'section', 'version': '0.6.0', 'name': 'Politique', 'description': None, 'path': '/actualites/politique', 'parent_id': '/actualites', 'parent': {'default': '/actualites'}, 'additional_properties': {'original': {'_id': '/actualites/politique', 'site_topper': {'site_logo_image': None}, 'social': {'facebook': None, 'twitter': None, 'rss': None, 'instagram': None}, 'site': {'site_url': None, 'site_tagline': None, 'pagebuilder_path_for_native_apps': None, 'site_title': None, 'site_description': None, 'site_keywords': None, 'site_about': None}, 'navigation': {'nav_title': 'Politique'}, '_admin': {'alias_ids': ['/actualites/politique']}, 'metadata': {'metadata_title': 'Politique', 'metadata_description': 'Politique'}, '_website': 'la-voix-de-lest', 'name': 'Politique', 'order': {'sections-menu': 2002, 'app-hamburger-menu': 2008}, 'parent': {'default': '/actualites', 'app-hamburguer-menu': None, 'app-hamburger-menu': '/actualites', 'sections-menu': '/actualites'}, 'ancestors': {'default': ['/actualites'], 'app-hamburguer-menu': [], 'app-hamburger-menu': ['/actualites'], 'sections-menu': ['/', '/actualites']}, 'inactive': False, 'node_type': 'section'}}, '_website_section_id': 'la-voix-de-lest./actualites/politique'}]}, 'promo_items': {'basic': {'_id': '7SVSDS7FJNCLJB4LAYY3ZUSFTI', 'additional_properties': {'fullSizeResizeUrl': '/resizer/MEOLNgfv-4C4Mp2GafPxdD1i9-U=/arc-photo-lescoopsdelinformation/arc2-prod/public/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'galleries': [], 'mime_type': 'image/jpeg', 'originalName': '7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'originalUrl': 'https://cloudfront-us-east-1.images.arcpublishing.com/lescoopsdelinformation/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'proxyUrl': '/resizer/MEOLNgfv-4C4Mp2GafPxdD1i9-U=/arc-photo-lescoopsdelinformation/arc2-prod/public/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'published': True, 'resizeUrl': '/resizer/MEOLNgfv-4C4Mp2GafPxdD1i9-U=/arc-photo-lescoopsdelinformation/arc2-prod/public/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'restricted': False, 'thumbnailResizeUrl': '/resizer/6Ket23g7SGQ8Et-Ss7SkJM-T7D4=/300x0/arc-photo-lescoopsdelinformation/arc2-prod/public/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'version': 0}, 'address': {'region': 'Québec'}, 'caption': 'La Ville de Sutton a lancé, le 7 février, sa politique révisée des familles et des aînés.', 'created_date': '2023-01-29T00:33:37Z', 'credits': {'affiliation': [{'name': 'ARCHIVES LA VOIX DE L’EST', 'type': 'author'}], 'by': [{'byline': 'Credit photo', 'name': 'ARCHIVES LA VOIX DE L’EST', 'type': 'author'}]}, 'height': 1366, 'last_updated_date': '2023-01-29T00:33:37Z', 'licensable': False, 'owner': {'id': 'lescoopsdelinformation'}, 'source': {'additional_properties': {'editor': 'photo center'}, 'system': 'OMERLO'}, 'type': 'image', 'url': 'https://cloudfront-us-east-1.images.arcpublishing.com/lescoopsdelinformation/7SVSDS7FJNCLJB4LAYY3ZUSFTI.jpg', 'version': '0.10.3', 'width': 2048}}, 'related_content': {'basic': [], 'redirect': []}, 'distributor': {'category': 'staff', 'name': 'lescoopsdelinformation', 'subcategory': ''}, 'canonical_website': 'la-voix-de-lest', 'geo': {}, 'planning': {'internal_note': '', 'story_length': {'character_count_actual': 2138, 'character_encoding': 'UTF-16', 'inch_count_actual': 3, 'line_count_actual': 15, 'word_count_actual': 349}}, 'display_date': '2023-02-11T17:22:24.265Z', 'credits': {'by': []}, 'subtype': 'article', 'first_publish_date': '2023-02-11T17:22:24.265Z', 'websites': {'la-voix-de-lest': {'website_section': {'_id': '/actualites', '_website': 'la-voix-de-lest', 'type': 'section', 'version': '0.6.0', 'name': 'Actualités', 'description': None, 'path': '/actualites', 'parent_id': '/', 'parent': {'default': '/'}, 'additional_properties': {'original': {'_id': '/actualites', 'site_topper': {'site_logo_image': None}, 'social': {'facebook': None, 'twitter': None, 'rss': None, 'instagram': None}, 'site': {'site_url': None, 'site_tagline': None, 'pagebuilder_path_for_native_apps': None, 'site_title': None, 'site_description': None, 'site_keywords': None, 'site_about': None}, 'navigation': {'nav_title': 'Actualités'}, '_admin': {'alias_ids': ['/actualites']}, 'styles': {'color': 'Rouge primaire'}, 'metadata': {'metadata_title': 'Actualités', 'metadata_description': 'Actualités'}, '_website': 'la-voix-de-lest', 'name': 'Actualités', 'order': {'links-bar': 1001, 'sections-menu': 1001, 'pour-toi-settings': 1001}, 'parent': {'default': '/', 'app-hamburguer-menu': None, 'app-hamburger-menu': '/', 'links-bar': '/', 'sections-menu': '/', 'pour-toi-settings': '/'}, 'ancestors': {'default': [], 'app-hamburguer-menu': [], 'app-hamburger-menu': [], 'links-bar': ['/'], 'sections-menu': ['/'], 'pour-toi-settings': ['/']}, 'inactive': False, 'node_type': 'section'}}, '_website_section_id': 'la-voix-de-lest./actualites'}, 'website_url': '/actualites/2023/02/11/sutton-devoile-sa-nouvelle-politique-des-familles-et-des-aines-ZXNMC22EJRHUDOMXZLZZKOWGIY/'}}, 'additional_properties': {'clipboard': {}, 'has_published_copy': True, 'is_published': False}, 'publish_date': '2023-02-11T17:22:24.265Z', '_website_ids': ['la-voix-de-lest'], '_website_urls': ['/actualites/2023/02/11/sutton-devoile-sa-nouvelle-politique-des-familles-et-des-aines-ZXNMC22EJRHUDOMXZLZZKOWGIY/'], 'canonical_url': '/actualites/2023/02/11/sutton-devoile-sa-nouvelle-politique-des-familles-et-des-aines-ZXNMC22EJRHUDOMXZLZZKOWGIY/', 'publishing': {'scheduled_operations': {'publish_edition': [], 'unpublish_edition': []}}, '_id': 'ZXNMC22EJRHUDOMXZLZZKOWGIY'}



# # Sample dictionary
# data = {
#     'type': 'story',
#     'version': '0.10.9',
#     'content_elements': [
#         {'_id': 'HYJW4XHXCFDTXFLBZI4RSSVYF4', 'type': 'text', 'additional_properties': {'_id': 1676135995161, 'comments': [], 'inline_comments': []}, 'content': 'Cette nouvelle politique est le résultat de près d’un an de travail, selon ses responsables. Rappelons qu’un comité de pilotage, présidé par la conseillère Lynda Graham, a permis d’en tracer les lignes directrices.'},
#         {'_id': 'WBD5H7ATFJDLRCXA3BLVOLQPYQ', 'type': 'text', 'additional_properties': {'_id': 1676135995162, 'comments': [], 'inline_comments': []}, 'content': 'Cette dernière a salué le travail des membres du comité, ainsi que la participation des citoyens au sondage et aux groupes de discussion mis en place lors du processus. Pour sa part, le maire de Sutton souligne l’importance de cette politique, qui vise, selon lui, une majeure partie de la population.'},
#         # Add other elements here
#     ]
# }

# # Extract the "content" elements and combine them into a single paragraph
# paragraph = ' '.join([element['content'] for element in story['content_elements'] if element['type'] == 'text'])

# print(paragraph)


def extract_content_and_caption(data_str):
    # Extract content elements
    content_matches = re.findall(r"'content':\s*'([^']*)'", data_str)
    content_paragraph = ' '.join(content_matches)

    # Extract caption
    caption_match = re.search(r"'caption':\s*'([^']*)'", data_str)
    caption = caption_match.group(1) if caption_match else 'No caption available'
    # Extract headlines and subheadlines
    headline_matches = re.findall(r"'headlines':\s*\{[^}]*'basic':\s*'([^']*)'", data_str)
    subheadline_matches = re.findall(r"'subheadlines':\s*\{[^}]*'basic':\s*'([^']*)'", data_str)
    
    headlines = ' '.join(headline_matches)
    subheadlines = ' '.join(subheadline_matches)

    return content_paragraph, caption, headlines, subheadlines


def extract_paragraphs_from_rtf(file_path):
    paragraphs = []
    captions = []
    headlines_list = []
    subheadlines_list = []
    count =0

    with open(file_path, 'r', encoding='utf-8') as file:
        for line in file:
            line = line.strip()
            if count >= 10:
                break
            if line:
                content_paragraph, caption, headlines, subheadlines = extract_content_and_caption(line)
                paragraphs.append(content_paragraph)
                captions.append(caption)
                headlines_list.append(headlines)
                subheadlines_list.append(subheadlines)
                count +=1

    return paragraphs, captions, headlines_list, subheadlines_list


# Path to your RTF file
file_path = '/Users/ramisafi/Downloads/stories_partition1.csv'

# Extract paragraphs and captions
paragraphs, captions, headlines, subheadlines = extract_paragraphs_from_rtf(file_path)

# Print paragraphs, captions, headlines, and subheadlines
for i, (paragraph, caption, headline, subheadline) in enumerate(zip(paragraphs, captions, headlines, subheadlines)):
    print(f"Paragraph {i+1}:")
    print(paragraph)
    print(f"Caption {i+1}:")
    print(caption)
    print(f"Headline {i+1}:")
    print(headline)
    print(f"Subheadline {i+1}:")
    print(subheadline)
    print()